<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Multas de la Policía Local</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #0044cc;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .calculadora-container {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            align-items: center;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .calculadora-container img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        .calculadora-container span {
            font-size: 16px;
            font-weight: bold;
            color: #0044cc;
        }
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px;
        }
        .search-container input {
            width: 300px;
            padding: 10px;
            font-size: 16px;
            margin-right: 10px;
        }
        .goto-clipboard {
            background-color: #0044cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .goto-clipboard:hover {
            background-color: #0033aa;
        }
        .results {
            margin: 20px;
            padding: 20px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .result-item {
            margin-bottom: 10px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .result-item input {
            margin-left: 10px;
            width: 100px;
        }
        .result-item button {
            margin-left: 10px;
        }
        .result-item:hover {
            background-color: #f0f0f0;
        }
        .result-item.selected {
            background-color: #d1e7dd;
            border-color: #b5d5c9;
        }
        .clipboard {
            margin: 20px;
            padding: 20px;
            background: #e9ffe9;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .clipboard h2 {
            margin-top: 0;
        }
        .clipboard-item {
            margin-bottom: 10px;
        }
        .copy-button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background-color: #0044cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-align: center;
        }
        .copy-button:hover {
            background-color: #0033aa;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Calculadora de Multas de la Policía Local</h1>
    </div>
    <div class="calculadora-container">
        <img src="https://www.openpol.es/wp-content/uploads/2018/04/policia-local-escudo.png" alt="Icono" />
    </div>
    <div class="search-container">
        <input id="search-input" type="text" placeholder="Buscar multas..." />
    </div>
    <div id="results" class="results"></div>
    <div id="clipboard" class="clipboard">
        <h2>Portapapeles</h2>
        <div id="clipboard-content"></div>
        <button id="copy-button" class="copy-button">Copiar al portapapeles</button>
    </div>
</body>
</html>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const multas = [
  { articulo: "Art. 1.1", descripcion: "Uso excesivo de claxon", multa: "200 €" },
  { articulo: "Art. 1.2", descripcion: "Giro indebido", multa: "250 €" },
  { articulo: "Art. 1.3", descripcion: "Cambio de carril en línea continua", multa: "275 €" },
  { articulo: "Art. 1.4", descripcion: "Circular en sentido contrario", multa: "400 € + Retirada de la licencia." },
  { articulo: "Art. 1.5", descripcion: "Estacionar de manera incorrecta", multa: "150 €" },
            ];

            const resultsContainer = document.getElementById("results");
            const searchInput = document.getElementById("search-input");
            const clipboardContainer = document.getElementById("clipboard-content");
            const copyButton = document.getElementById("copy-button");

            let clipboard = new Map();

            function mostrarMultas(query = "") {
                resultsContainer.innerHTML = "";

                const filteredMultas = multas.filter(multa =>
                    multa.articulo.toLowerCase().includes(query) ||
                    multa.descripcion.toLowerCase().includes(query)
                );

                if (filteredMultas.length === 0) {
                    resultsContainer.textContent = "No se encontraron resultados.";
                } else {
                    filteredMultas.forEach(multa => {
                        const div = document.createElement("div");
                        div.className = "result-item";

                        if (multa.multa.includes("-")) {
                            const [min, max] = multa.multa.replace("€", "").split("-").map(v => parseInt(v.trim(), 10));
                            div.innerHTML = `
                                ${multa.articulo} - ${multa.descripcion}: 
                                <input type="number" placeholder="${min}-${max}" min="${min}" max="${max}" />
                                <button>Agregar</button>
                            `;
                            const input = div.querySelector("input");
                            const button = div.querySelector("button");
                            button.addEventListener("click", () => {
                                const importe = input.value;
                                const key = `${multa.articulo} - ${multa.descripcion}`;
                                if (importe >= min && importe <= max) {
                                    if (!clipboard.has(key)) {
                                        clipboard.set(key, `${key}: ${importe} €`);
                                        div.classList.add("selected");
                                        actualizarClipboard();
                                    } else {
                                        alert("Esta multa ya está en el portapapeles.");
                                    }
                                } else {
                                    alert(`Introduce un valor válido entre ${min} y ${max}.`);
                                }
                            });
                        } else {
                            div.textContent = `${multa.articulo} - ${multa.descripcion}: ${multa.multa}`;
                            div.addEventListener("click", () => toggleClipboard(div, multa));
                        }

                        resultsContainer.appendChild(div);
                    });
                }
            }

            function toggleClipboard(element, multa) {
                const key = `${multa.articulo} - ${multa.descripcion}: ${multa.multa}`;
                if (clipboard.has(key)) {
                    clipboard.delete(key);
                    element.classList.remove("selected");
                } else {
                    clipboard.set(key, key);
                    element.classList.add("selected");
                }
                actualizarClipboard();
            }

            function actualizarClipboard() {
                clipboardContainer.innerHTML = "";

                if (clipboard.size === 0) {
                    clipboardContainer.textContent = "No hay multas seleccionadas.";
                } else {
                    clipboard.forEach(item => {
                        const div = document.createElement("div");
                        div.className = "clipboard-item";
                        div.textContent = item;
                        clipboardContainer.appendChild(div);
                    });
                }
            }

            function copiarAlPortapapeles() {
                const texto = Array.from(clipboard.values()).join("\n");
                if (texto) {
                    navigator.clipboard.writeText(texto).then(() => {
                        alert("Contenido copiado al portapapeles.");
                    }).catch(err => {
                        console.error("Error al copiar al portapapeles:", err);
                    });
                } else {
                    alert("No hay contenido para copiar.");
                }
            }

            copyButton.addEventListener("click", copiarAlPortapapeles);

            searchInput.addEventListener("input", () => {
                const query = searchInput.value.toLowerCase();
                mostrarMultas(query);
            });

            mostrarMultas();
        });
    </script>
</head>
<body>
    <div class="header">
        <h1>Calculadora de Multas de la Policía Local</h1>
    </div>

    <div class="search-container">
        <input type="text" id="search-input" placeholder="Buscar...">
        <button class="goto-clipboard" onclick="document.getElementById('clipboard').scrollIntoView()">Ir al portapapeles</button>
    </div>

    <div id="results" class="results">
        <!-- Resultados aparecerán aquí -->
    </div>

    <div id="clipboard" class="clipboard">
        <h2>Portapapeles</h2>
        <div id="clipboard-content">
            No hay multas seleccionadas.
        </div>
        <button id="copy-button" class="copy-button">Copiar Portapapeles</button>
    </div>
</body>
</html>
