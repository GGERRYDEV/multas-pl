<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Multas de la Policía Local</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #0044cc;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        .header img {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 80px;
            height: 90px;
            background: white;
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px;
            gap: 10px;
        }
        .search-container input {
            width: 300px;
            padding: 10px;
            font-size: 16px;
        }
        .goto-clipboard {
            background-color: #0044cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .goto-clipboard:hover {
            background-color: #0033aa;
        }
        .results {
            margin: 20px;
            padding: 20px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .result-item {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .result-item input[type="number"] {
            margin-left: 10px;
            width: 100px;
        }
        .result-item button {
            margin-left: 10px;
            padding: 5px 10px;
        }
        .result-item:hover {
            background-color: #f0f0f0;
        }
        .result-item.selected {
            background-color: #d1e7dd;
            border-color: #b5d5c9;
        }
        .clipboard {
            margin: 20px;
            padding: 20px;
            background: #e9ffe9;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .clipboard h2 {
            margin-top: 0;
        }
        .clipboard-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .clipboard-item button {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .clipboard-item button:hover {
            background-color: darkred;
        }
        .copy-button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background-color: #0044cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-align: center;
        }
        .copy-button:hover {
            background-color: #0033aa;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Calculadora de Multas de la Policía Local</h1>
        <img src="https://www.openpol.es/wp-content/uploads/2018/04/policia-local-escudo.png" alt="Logo Policía">
    </div>
    <div class="search-container">
        <input id="search-input" type="text" placeholder="Buscar multas..." />
        <button class="goto-clipboard" onclick="document.getElementById('clipboard').scrollIntoView()">Ir al portapapeles</button>
    </div>
    <div id="results" class="results"></div>
    <div id="clipboard" class="clipboard">
        <h2>Portapapeles</h2>
        <div id="clipboard-content"></div>
        <button id="copy-button" class="copy-button">Copiar al portapapeles</button>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const multas = [
            { articulo: "Art. 1.1", descripcion: "Uso excesivo de claxon", multa: "200 €" },
            { articulo: "Art. 2.2", descripcion: "Giro indebido", multa: "250 €" },
            { articulo: "Art. 3.3", descripcion: "Exceso de velocidad", multa: "150-300 €" },
        ];

        const resultsContainer = document.getElementById("results");
        const clipboardContent = document.getElementById("clipboard-content");
        const copyButton = document.getElementById("copy-button");
        let clipboard = new Map();

        function renderMultas(query = "") {
            resultsContainer.innerHTML = "";
            const filteredMultas = multas.filter(
                multa => multa.articulo.toLowerCase().includes(query) ||
                         multa.descripcion.toLowerCase().includes(query)
            );

            if (filteredMultas.length === 0) {
                resultsContainer.textContent = "No se encontraron resultados.";
                return;
            }

            filteredMultas.forEach(multa => {
                const div = document.createElement("div");
                div.className = "result-item";
                const isRange = multa.multa.includes("-");

                if (isRange) {
                    const [min, max] = multa.multa.replace("€", "").split("-").map(Number);
                    div.innerHTML = `
                        ${multa.articulo} - ${multa.descripcion}:
                        <input type="number" min="${min}" max="${max}" placeholder="${min}-${max}" />
                        <button>Agregar</button>
                    `;
                    const input = div.querySelector("input");
                    const button = div.querySelector("button");
                    button.addEventListener("click", () => {
                        const value = parseInt(input.value, 10);
                        if (isNaN(value) || value < min || value > max) {
                            alert(`Por favor, selecciona un valor válido entre ${min} y ${max} €.`);
                        } else {
                            addToClipboard(`${multa.articulo} - ${multa.descripcion}: ${value} €`, div);
                        }
                    });
                } else {
                    div.textContent = `${multa.articulo} - ${multa.descripcion}: ${multa.multa}`;
                    div.addEventListener("click", () => toggleClipboard(div, multa));
                }

                resultsContainer.appendChild(div);
            });
        }

        function toggleClipboard(element, multa) {
            const key = `${multa.articulo} - ${multa.descripcion}: ${multa.multa}`;
            if (clipboard.has(key)) {
                clipboard.delete(key);
                element.classList.remove("selected");
            } else {
                clipboard.set(key, key);
                element.classList.add("selected");
            }
            updateClipboard();
        }

        function addToClipboard(item, element) {
            if (!clipboard.has(item)) {
                clipboard.set(item, item);
                element.classList.add("selected");
            } else {
                alert("Este artículo ya está en el portapapeles.");
            }
            updateClipboard();
        }

        function updateClipboard() {
            clipboardContent.innerHTML = "";

            if (clipboard.size === 0) {
                clipboardContent.textContent = "No hay multas seleccionadas.";
                return;
            }

            clipboard.forEach(item => {
                const div = document.createElement("div");
                div.className = "clipboard-item";
                div.textContent = item;

                const deleteButton = document.createElement("button");
                deleteButton.textContent = "Eliminar";
                deleteButton.addEventListener("click", () => {
                    clipboard.delete(item);
                    renderMultas(document.getElementById("search-input").value.toLowerCase());
                    updateClipboard();
                });

                div.appendChild(deleteButton);
                clipboardContent.appendChild(div);
            });
        }

        copyButton.addEventListener("click", () => {
            const text = Array.from(clipboard.values()).join("\n");
            if (text) {
                navigator.clipboard.writeText(text).then(() => {
                    alert("Contenido copiado al portapapeles.");
                });
            } else {
                alert("No hay contenido para copiar.");
            }
        });

        document.getElementById("search-input").addEventListener("input", (e) => {
            renderMultas(e.target.value.toLowerCase());
        });

        renderMultas();
    });
</script>
